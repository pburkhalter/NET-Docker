version: '3.7'

services:
  samba:
    image: dperson/samba
    # yes: the share is writable
    # no: no guest access
    # no: not read-only share
    # patrik.burkhalter: only the user 'patrik.burkhalter' has access to this share
    command: ["-u", "patrik.burkhalter;passwort", "-s", "dateiablage;/mount/dateiablage;yes;no;no;patrik.burkhalter;"]
    volumes:
      - samba_volume:/mount/dateiablage
    ports:
      - "1390:139"
      - "4450:445"
    environment:
      - TZ=Europe/Zurich
    networks:
      - internal_network
      - default

  tomcat:
    image: tomcat:latest
    ports:
      - "8080:8080"
    volumes:
      - tomcat_volume:/usr/local/tomcat/webapps
      - ./tomcat/index.html:/usr/local/tomcat/webapps/ROOT/index.html

    networks:
      - internal_network
      - default

  cs2:
    image: joedwards32/cs2
    ports:
      - "27015:27015"
      - "27016:27016"
      - "27020:27020"
    networks:
      - internal_network
      - default
    volumes:
      - cs2_volume:/home/steam/cs2-dedicated/
    environment:
      - CS2_SERVERNAME="Test Server TEKO" # Set the visible name for your private server
      - CS2_IP="0.0.0.0"                  # CS2 server listening IP address, 0.0.0.0 - all IP addresses on the local machine, empty - IP identified automatically
      - CS2_PORT=27015                    # CS2 server listen port tcp_udp
      - CS2_LAN="1"                       # 0 - LAN mode disabled, 1 - LAN Mode enabled
      - CS2_RCONPW="test"                 # RCON password
      - CS2_PW="test"                     # CS2 server password
      - CS2_MAXPLAYERS=10                 # Max players
      - CS2_MAPGROUP="mg_active"          # Map pool
      - CS2_STARTMAP="de_inferno"         # Start map

networks:
  internal_network:
    driver: bridge
  default:
    driver: bridge


volumes:
  samba_volume:
    driver: local
  tomcat_volume:
    driver: local
  cs2_volume:
    driver: local